#
#   Auto generated Nginx configuration
#       @time: {{ "now"|date('H:i:s d-m-Y') }}
#       @author: hyn.me
#       @website: {{ website.id }} "{{ website.present().name }}"
#       @url: {{ route('management-interface@website@read', website.present().urlArguments) }}
#

{% if website.directory.image_cache() %}
proxy_cache_path {{ website.directory.image_cache() }} levels=1:2 keys_zone=img_cache_hyn_mt_{{ website.id }}:10m max_size=1G;
{% endif %}

#
#   Hostnames with certificate
#
{% for hostname in website.hostnamesWithCertificate %}
        {% include "webserver::webserver.nginx.includes.server-block" with {
            'hostname': hostname,
            'ssl': hostname.certificate
        } %}
{% endfor %}

#
#   Hostnames without certificate
#
{% if website.hostnamesWithoutCertificate.count() > 0 %}
    {% include "webserver::webserver.nginx.includes.server-block" with {
            'hostnames': website.hostnamesWithoutCertificate
        } %}
{% endif %}